<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Édipo Luis Féderle - Compile SBCL (Common Lisp) with Threads support on Mac OSX</title>
    <link rel="stylesheet" href="../css/default.css" />
    <link rel="stylesheet" href="../css/syntax.css" />
  </head>
  <body>
    <header>
      <div class="logo">
        <a href="../">Édipo L. Féderle</a>
      </div>
      <nav>
        <a href="../misc.html">Misc</a>
        <a href="../academia.html">Academia</a>
        <a href="../archive.html">Archive</a>
        <a href="../archive.html">Links</a>
        <a href="../contact.html">Contact</a>
        <a href="../about.html">About</a>
      </nav>
    </header>

    <main role="main">
      <h1>Compile SBCL (Common Lisp) with Threads support on Mac OSX</h1>
      <div class="info">
  Posted on November 30, 2018
  
</div>
<div class="info">
  
  Tags: lisp, common lisp, macosx
  
</div>

<p>Hey,</p>
<p>Recently I start to read the <a href="http://www.gigamonkeys.com/book/">Practical Common Lisp book</a>, so the first this that I did, after reading the introduction was trying to install the SBCL in order to run the examples and play with the code.</p>
<p>On OSX, I was thinking it should be trivial as:</p>
<pre><code>brew install sblc</code></pre>
<p>well, it works well, the only bad thing about this is that the pre-compiled version of for OSX doesn’t come with threads support enabled, this is because it is an experimental feature in SBCL so in order to make it work on OSX you need to compile using some flags:</p>
<pre><code>-- fancy
-- with-sb-thread</code></pre>
<p>Here the full commands to do it:</p>
<pre><code>curl -O https://sourceforge.net/projects/sbcl/files/sbcl/sbcl-&lt;VERSION&gt;-source.tar.bz2
sudo sh make.sh --fancy --with-sb-thread
sudo sh install.sh</code></pre>
<p>It could take some time to finish. To check access the REPL with <code>SBCL</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode lisp"><code class="sourceCode commonlisp"><a class="sourceLine" id="cb4-1" title="1"></a>
<a class="sourceLine" id="cb4-2" title="2">(<span class="kw">defun</span><span class="fu"> test-sbcl-thread </span>()</a>
<a class="sourceLine" id="cb4-3" title="3">           (<span class="kw">let</span> ((top-level <span class="va">*query-io*</span>))</a>
<a class="sourceLine" id="cb4-4" title="4">             (sb-thread:make-thread</a>
<a class="sourceLine" id="cb4-5" title="5">              (<span class="kw">lambda</span> ()</a>
<a class="sourceLine" id="cb4-6" title="6">                (<span class="kw">format</span> top-level <span class="st">&quot;Hello from ~a~%&quot;</span></a>
<a class="sourceLine" id="cb4-7" title="7">                        (sb-thread:thread-name sb-thread:*current-thread*))))))</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9">(test-sbcl-thread)</a></code></pre></div>
<p>That’s all, I hope to post some things related to “Practical Common Lisp” book as soon as possible.</p>
<p>Take care.</p>

    </main>

    <footer>
      Site proudly generated by
      <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </footer>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131025377-1"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());

     gtag('config', 'UA-131025377-1');
    </script>

  </body>
</html>
